<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Магазин велосипедов</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <div class="header__content">
            <a href="/" class="logo">VeloPro</a>
            <nav>
                <ul class="header_list">
                    <li><a href="index.html" class="header_link active">Главная</a></li>
                    <li><a href="catalog.html" class="header_link">Каталог</a></li>
                    <li><a href="about.html" class="header_link">О нас</a></li>
                    <li><a href="" class="header_link">Контакты</a></li>
                    <li>
                        <a href="cart.html" class="cart_icon header_link">
                            Корзина
                            <span class="cart_count">0</span>
                        </a>
                    </li>
                </ul>
            </nav>
        </div>
    </header>
    <main>
        <section class="hero-section">
            <h1>Добро пожаловать в VeloPro</h1>
            <p>Лучшие велосипеды для вашего активного образа жизни</p>
            <a href="catalog.html" class="browse-catalog">Перейти в каталог</a>
        </section>

        <section class="promo-banner">
            <div class="promo-content">
                <h2>ВЕСЕННЯЯ РАСПРОДАЖА!</h2>
                <p>Скидки до 30% на все горные велосипеды</p>
                <p class="promo-timer">До конца акции: <span id="promo-countdown">3 дня 8 часов</span></p>
                <a href="catalog.html?category=mountain" class="promo-button">Выбрать со скидкой</a>
            </div>
        </section>

        <section class="categories-section">
            <h2 class="section-title">Категории велосипедов</h2>
            <div class="categories-grid">
                <a href="catalog.html?category=mountain" class="category-card">
                    <div class="category-image">
                        <img src="img/mountain_bike.jpg" alt="Горные велосипеды">
                    </div>
                    <h3>Горные</h3>
                </a>
                <a href="catalog.html?category=road" class="category-card">
                    <div class="category-image">
                        <img src="img/road_bike.jpg" alt="Шоссейные велосипеды">
                    </div>
                    <h3>Шоссейные</h3>
                </a>
                <a href="catalog.html?category=city" class="category-card">
                    <div class="category-image">
                        <img src="img/city_bike.jpg" alt="Городские велосипеды">
                    </div>
                    <h3>Городские</h3>
                </a>
                <a href="catalog.html?category=children" class="category-card">
                    <div class="category-image">
                        <img src="img/children_bike.jpg" alt="Детские велосипеды">
                    </div>
                    <h3>Детские</h3>
                </a>
            </div>
        </section>

        <section class="popular-products">
            <h2 class="section-title">Популярные товары</h2>
            <div class="products-carousel" id="popular-products-container">
                <!-- Сюда будут загружаться популярные товары через JavaScript -->
                <div class="loading-spinner">Загрузка товаров...</div>
            </div>
        </section>

        <section class="advantages-section">
            <h2 class="section-title">Почему выбирают нас</h2>
            <div class="advantages-grid">
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <img src="img/quality-icon.svg" alt="Качество">
                    </div>
                    <h3>Гарантия качества</h3>
                    <p>Все наши велосипеды проходят многоступенчатый контроль качества</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <img src="img/delivery-icon.svg" alt="Доставка">
                    </div>
                    <h3>Быстрая доставка</h3>
                    <p>Доставляем по всей России. Бесплатно при заказе от 10 000 ₽</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <img src="img/service-icon.svg" alt="Сервис">
                    </div>
                    <h3>Сервисное обслуживание</h3>
                    <p>Бесплатное первое ТО и скидки на все последующие работы</p>
                </div>
                <div class="advantage-item">
                    <div class="advantage-icon">
                        <img src="img/warranty-icon.svg" alt="Гарантия">
                    </div>
                    <h3>Расширенная гарантия</h3>
                    <p>2 года гарантии на все модели и 5 лет на премиум-серию</p>
                </div>
            </div>
        </section>
    </main>
    <footer>
        <div class="footer_content">
            <div class="footer_section">
                <h3>Навигация</h3>
                <ul>
                    <li><a href="catalog.html">Каталог</a></li>
                    <li><a href="cart.html">Корзина</a></li>
                    <li><a href="about.html">О нас</a></li>
                    <li><a href="">Контакты</a></li>
                </ul>
            </div>
            <div class="footer_section">
                <h3>Категории</h3>
                <ul>
                    <li><a href="catalog.html?category=mountain">Горные велосипеды</a></li>
                    <li><a href="catalog.html?category=road">Шоссейные велосипеды</a></li>
                    <li><a href="catalog.html?category=city">Городские велосипеды</a></li>
                    <li><a href="catalog.html?category=children">Детские велосипеды</a></li>
                </ul>
            </div>
            <div class="footer_section">
                <h3>Контакты</h3>
                <ul>
                    <li>Телефон: +7 (917) 260-06-21</li>
                    <li>Email: mishkaosip.ru</li>
                    <li>Адрес: г. Самара, Московское шоссе 34Б</li>
                </ul>
            </div>
            <div class="footer_section">
                <h3>Мы в соцсетях</h3>
                <div class="social-links">
                    <a href="https://vk.com/m0tilda228"><img src="img/vk.svg" alt="VK"></a>
                    <a href="https://t.me/MOTILDA228"><img src="img/telegram.svg" alt="Telegram"></a>
                    <a href="https://www.youtube.com/watch?v=GAeB5jpYokk"><img src="img/youtube.svg" alt="YouTube"></a>
                </div>
            </div>
        </div>
    </footer>
    <script src="js/api.js"></script>
    <script>
        // Загрузка популярных товаров
        document.addEventListener('DOMContentLoaded', function() {
            // Обновляем счетчик товаров в корзине
            updateCartCount();
            
            // Загружаем популярные товары
            loadPopularProducts();
            
            // Запускаем таймер акции
            updatePromoCountdown();
        });
        
        // Функция для обновления таймера акции
        function updatePromoCountdown() {
            // Устанавливаем дату окончания акции (3 дня от текущего момента для демо)
            const now = new Date();
            const endDate = new Date(now);
            endDate.setDate(now.getDate() + 3);
            endDate.setHours(now.getHours() + 8);
            
            // Запускаем обновление таймера каждую минуту
            function updateTimer() {
                const now = new Date();
                const timeDiff = endDate - now;
                
                if (timeDiff <= 0) {
                    document.getElementById('promo-countdown').textContent = 'Акция завершена';
                    return;
                }
                
                // Рассчитываем дни, часы и минуты
                const days = Math.floor(timeDiff / (1000 * 60 * 60 * 24));
                const hours = Math.floor((timeDiff % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
                const minutes = Math.floor((timeDiff % (1000 * 60 * 60)) / (1000 * 60));
                
                // Обновляем текст таймера
                let timerText = '';
                if (days > 0) timerText += `${days} ${getDayWord(days)} `;
                timerText += `${hours} ${getHourWord(hours)} ${minutes} ${getMinuteWord(minutes)}`;
                
                document.getElementById('promo-countdown').textContent = timerText;
            }
            
            // Функции для правильного склонения слов
            function getDayWord(days) {
                if (days === 1) return 'день';
                if (days >= 2 && days <= 4) return 'дня';
                return 'дней';
            }
            
            function getHourWord(hours) {
                if (hours === 1 || hours === 21) return 'час';
                if ((hours >= 2 && hours <= 4) || (hours >= 22 && hours <= 24)) return 'часа';
                return 'часов';
            }
            
            function getMinuteWord(minutes) {
                if (minutes % 10 === 1 && minutes !== 11) return 'минута';
                if ([2, 3, 4].includes(minutes % 10) && ![12, 13, 14].includes(minutes)) return 'минуты';
                return 'минут';
            }
            
            // Первое обновление таймера
            updateTimer();
            
            // Обновляем таймер каждую минуту
            setInterval(updateTimer, 60000);
        }
        
        // Функция для загрузки популярных товаров
        function loadPopularProducts() {
            const container = document.getElementById('popular-products-container');
            
            // Имитация загрузки данных (в реальном проекте здесь был бы запрос к API)
            setTimeout(() => {
                // Данные о популярных товарах (можно заменить на реальные данные из API)
                const popularProducts = [
                    {
                        id: 1,
                        name: 'Горный велосипед XC Pro',
                        price: 42990,
                        image: 'img/mountain_bike.jpg',
                        category: 'mountain'
                    },
                    {
                        id: 2,
                        name: 'Шоссейный велосипед Road Master',
                        price: 56990,
                        image: 'img/road_bike.jpg',
                        category: 'road'
                    },
                    {
                        id: 3,
                        name: 'Городской велосипед City Cruiser',
                        price: 29990,
                        image: 'img/city_bike.jpg',
                        category: 'city'
                    },
                    {
                        id: 4,
                        name: 'Детский велосипед Junior Rider',
                        price: 15990,
                        image: 'img/children_bike.jpg',
                        category: 'children'
                    }
                ];
                
                // Очищаем контейнер от индикатора загрузки
                container.innerHTML = '';
                
                // Добавляем каждый товар в контейнер
                popularProducts.forEach(product => {
                    const productCard = document.createElement('div');
                    productCard.className = 'product-card';
                    
                    productCard.innerHTML = `
                        <div class="product-image">
                            <img src="${product.image}" alt="${product.name}" onerror="this.src='img/placeholder.jpg'">
                        </div>
                        <div class="product-info">
                            <h3>${product.name}</h3>
                            <p class="product-category">${getCategoryName(product.category)}</p>
                            <div class="product-footer">
                                <p class="product-price">${product.price} ₽</p>
                                <button class="add-to-cart" data-id="${product.id}" data-name="${product.name}" 
                                        data-price="${product.price}" data-image="${product.image}">В корзину</button>
                            </div>
                        </div>
                    `;
                    
                    container.appendChild(productCard);
                });
                
                // Добавляем обработчики событий для кнопок "В корзину"
                addToCartEventListeners();
                
            }, 1000); // Имитация задержки загрузки
        }
        
        // Функция для получения названия категории по её коду
        function getCategoryName(categoryCode) {
            const categories = {
                'mountain': 'Горный велосипед',
                'road': 'Шоссейный велосипед',
                'city': 'Городской велосипед',
                'children': 'Детский велосипед'
            };
            
            return categories[categoryCode] || categoryCode;
        }
        
        // Добавляем обработчики на кнопки "В корзину"
        function addToCartEventListeners() {
            document.querySelectorAll('.add-to-cart').forEach(button => {
                button.addEventListener('click', function() {
                    const product = {
                        id: this.dataset.id,
                        name: this.dataset.name,
                        price: parseInt(this.dataset.price),
                        image: this.dataset.image,
                        quantity: 1
                    };
                    
                    addToCart(product);
                    showNotification(`Товар "${product.name}" добавлен в корзину!`);
                });
            });
        }
        
        // Функция добавления товара в корзину
        function addToCart(product) {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const existingProduct = cart.find(item => item.id === product.id);
            
            if (existingProduct) {
                existingProduct.quantity += 1;
            } else {
                cart.push(product);
            }
            
            localStorage.setItem('cart', JSON.stringify(cart));
            updateCartCount();
        }
        
        // Обновление счетчика товаров в корзине
        function updateCartCount() {
            const cart = JSON.parse(localStorage.getItem('cart')) || [];
            const totalItems = cart.reduce((total, item) => total + item.quantity, 0);
            document.querySelector('.cart_count').textContent = totalItems;
        }
        
        // Показать уведомление
        function showNotification(message) {
            // Проверяем, нет ли уже уведомления
            let notification = document.querySelector('.notification');
            
            if (!notification) {
                notification = document.createElement('div');
                notification.className = 'notification';
                document.body.appendChild(notification);
            }
            
            notification.textContent = message;
            notification.classList.add('show');
            
            // Удаляем уведомление через 3 секунды
            setTimeout(() => {
                notification.classList.remove('show');
                setTimeout(() => {
                    if (document.body.contains(notification)) {
                        document.body.removeChild(notification);
                    }
                }, 300);
            }, 3000);
        }
    </script>
</body>
</html> 